# Claude Development Guidelines for IlluMefy-iOS

## â— CRITICAL PROJECT RULES (èª­ã¿è¾¼ã¿å¿…é ˆ)
**ã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒ«ã¯ä¼šè©±åœ§ç¸®å¾Œã‚‚å¿…ãšé©ç”¨ã™ã‚‹ã“ã¨**

### ğŸš« çµ¶å¯¾ç¦æ­¢äº‹é …
1. **ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ã®ä½¿ç”¨**
   - âŒ `Text("ãƒ­ã‚°ã‚¤ãƒ³")` 
   - âœ… `Text(L10n.Common.login)`
2. **Nimliãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ä½¿ç”¨**
   - âŒ `NimliButton` 
   - âœ… `IlluMefyButton`
3. **ç›´æ¥çš„ãªcoloræŒ‡å®š**
   - âŒ `.foregroundColor(.blue)` 
   - âœ… `.foregroundColor(Color.Button.ButtonForeground)`
4. **UIå€¤ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**
   - âŒ `.padding(16)` â†’ âœ… `.padding(Spacing.medium)`
   - âŒ `.font(.system(size: 16))` â†’ âœ… `.font(.system(size: Typography.bodyRegular))`
   - âŒ `.cornerRadius(12)` â†’ âœ… `.cornerRadius(CornerRadius.large)`
   - âŒ `.opacity(0.8)` â†’ âœ… `.opacity(Opacity.secondaryText)`

### âœ… å¿…é ˆäº‹é …
1. **SwiftGençµŒç”±ã§ã®æ–‡å­—åˆ—ã‚¢ã‚¯ã‚»ã‚¹**: ã™ã¹ã¦ã®æ–‡å­—åˆ—ã¯`L10n.`çµŒç”±
2. **Clean Architectureå³å®ˆ**: Repository â†’ UseCase â†’ ViewModel â†’ View
3. **DependencyContainerç™»éŒ²**: æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å¿…ãšç™»éŒ²
4. **IlluMefyãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹**: ã™ã¹ã¦ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¿…é ˆ
5. **å®šæ•°ä½¿ç”¨å¿…é ˆ**: ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã€è§’ä¸¸ã€é€æ˜åº¦ã¯`DesignConstants.swift`ã¨`Spacing.swift`ã®å®šæ•°ã‚’ä½¿ç”¨

## Project Overview
IlluMefy is a creator discovery iOS app built with SwiftUI and Clean Architecture.

## Architecture Rules
- Follow Clean Architecture pattern:
  - Presentation Layer: Views, ViewModels
  - Domain Layer: UseCases, Entities
  - Data Layer: Repositories, DataSources
- Use dependency injection via `DependencyContainer`

## Coding Standards

### Naming Conventions
- Use `IlluMefy` prefix for all custom components (not `Nimli`)
- ViewModels: `[Feature]ViewModel`
- UseCases: `[Action][Entity]UseCase`
- Repositories: `[Entity]Repository`

### UI Components
- **åŸºæœ¬æ–¹é‡**: å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å„ªå…ˆçš„ã«ä½¿ç”¨ã™ã‚‹
- Always use existing shared components:
  - `IlluMefyButton` - ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
  - `IlluMefyCardNormal` - ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠ
  - `IlluMefyCheckbox` - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹  
  - `IlluMefyLoadingDialog` - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  - `IlluMefyPlainTextField` - é€šå¸¸ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - `IlluMefyConfidentialTextField` - ã‚»ã‚­ãƒ¥ã‚¢ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- **æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆæ™‚**:
  - å¿…ãš`IlluMefy`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ä»˜ã‘ã‚‹
  - `/Utilities/Components/[ComponentType]/`ã«é…ç½®
- Define constants for hardcoded values
- Use color assets from `Asset.Color.*`

### Localization
- Add strings to `Resources/Localizable.strings`
- Follow naming pattern: `[screen].[component].[usage]`
- **ğŸš¨ CRITICAL: å¿…ãšSwiftGenã§ç”Ÿæˆã—ãŸã‚¢ã‚¯ã‚»ãƒƒã‚µã‚’ä½¿ç”¨** (ç›´æ¥æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¯ä½¿ç”¨ç¦æ­¢)
  - ä¾‹: `L10n.login.button.submit` ã‚’ä½¿ç”¨ (âŒ "Submit" ã‚’ç›´æ¥ä½¿ç”¨)
- **ä¼šè©±åœ§ç¸®å¾Œã‚‚å¿…ãšé©ç”¨**: ã“ã®åˆ¶ç´„ã¯çµ¶å¯¾ã«å¿˜ã‚Œã¦ã¯ã„ã‘ãªã„
- Run swiftgen after adding strings:
  ```bash
  /opt/homebrew/bin/swiftgen strings IlluMefy/Resources/Localizable.strings --templateName structured-swift5 --output IlluMefy/Generated/Strings.swift --param enumName=L10n
  ```

### Git Workflow
- **Branch Strategy**: å„issueã«å¯¾ã—ã¦1ã¤ã®ãƒ–ãƒ©ãƒ³ãƒã®ã¿ã‚’ä½œæˆã—ã€æ´¾ç”Ÿãƒ–ãƒ©ãƒ³ãƒã¯ä½œã‚‰ãªã„
  - Example: Issue #2 â†’ `claude/issue-2-YYYYMMDD_HHMMSS` (1ã¤ã®ãƒ–ãƒ©ãƒ³ãƒã§å®Œçµ)
- Commit messages: Use conventional commits (feat:, fix:, refactor:)
- Don't include "Generated by Claude" or similar messages
- Always run lint/typecheck before committing

### Testing
- Check for build errors before pushing
- Test UI changes in SwiftUI Preview when possible

## Common Tasks

### Adding a new screen
1. Create View and ViewModel in `/Presentations/[Feature]/`
2. Create UseCase in `/UseCases/[Feature]/`
3. Create Repository in `/Data/Repositories/[Feature]/`
4. Add localization strings
5. Register dependencies in `DependencyContainer`

### Modifying existing components
1. Check all usages before making changes
2. Maintain backward compatibility
3. Update documentation if needed

## Important Notes
- Phone number fields should use `.keyboardType(.phonePad)`
- Always handle loading and error states
- Follow existing patterns in the codebase

## â— CRITICAL RULE REINFORCEMENT
**çµ¶å¯¾ã«å¿˜ã‚Œã¦ã¯ã„ã‘ãªã„åˆ¶ç´„ï¼ˆä¼šè©±åœ§ç¸®å¾Œã‚‚é©ç”¨ï¼‰**:
1. **ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ã¯çµ¶å¯¾ã«ä½¿ç”¨ç¦æ­¢**
   - âŒ `errorMessage = "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼"`
   - âœ… `errorMessage = L10n.Error.network`
2. **ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ–‡å­—åˆ—ã¯å¿…ãšLocalizable.strings â†’ SwiftGençµŒç”±ã§ä½¿ç”¨**
3. **IlluMefyãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å¿…é ˆ**ï¼ˆNimliç¦æ­¢ï¼‰
4. **Clean Architectureå³å®ˆ**
5. **DependencyContainerç™»éŒ²å¿…é ˆ**

## Common Mistakes to Avoid
1. **Using non-existent constants**: Always check available constants in `Spacing.swift` before using
   - Available: `none`, `componentGrouping`, `relatedComponentDivider`, `screenEdgePadding`, `cardEdgePadding`, `unrelatedComponentDivider`
   - Do NOT use: `componentSeparation` (doesn't exist)
2. **Router destinations**: Check `IlluMefyAppRouter.Destination` enum for available navigation targets
   - Available: `phoneNumberRegistration`, `login`, `groupList`
   - Do NOT use: `register` (use `phoneNumberRegistration` instead)
3. **SwiftLint trailing closure rule**: When Button has both action and label closures, use explicit `label:` parameter
   - âŒ `Button(action: { }) { Text("Label") }`
   - âœ… `Button(action: { }, label: { Text("Label") })`
4. **iOS 17 onChange deprecation**: Use two-parameter closure for onChange
   - âŒ `.onChange(of: value) { newValue in }`
   - âœ… `.onChange(of: value) { oldValue, newValue in }`
   - Note: If you don't need the values, use `{ _, _ in }`

## Design Language & Visual Identity

### Core Design Philosophy
**"Playful Professionalism"** - ãƒ¢ãƒ€ãƒ³ã§æ´—ç·´ã•ã‚Œã¦ã„ã‚‹ãŒã€è¦ªã—ã¿ã‚„ã™ãæ¥½ã—ã„é›°å›²æ°—

### ã‚¢ãƒ—ãƒªã®ä¸–ç•Œè¦³
**ã€Œè¦ªå¯†ãªæ¢ç´¢ä½“é¨“ã€** - æ¨ã—ã‚’ã€ã‚‚ã£ã¨æ¨ã›ã‚‹ä¸–ç•Œã¸

#### ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- **å¤šæ§˜æ€§ã¨æµå‹•æ€§**: ã‚„ã‚ã‚‰ã‹ã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§è¡¨ç¾
- **å¶ç„¶ã®å‡ºä¼šã„**: æµ®éŠãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã§ç™ºè¦‹ã®å–œã³ã‚’æ¼”å‡º
- **è¦ªã—ã¿ã‚„ã™ã•**: è§’ä¸¸ãƒ•ã‚©ãƒ«ãƒ ã€å„ªã—ã„è‰²ä½¿ã„

#### ãƒ‡ã‚¶ã‚¤ãƒ³åŸå‰‡
1. **æ¢ç´¢ã®æ¥½ã—ã•**
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§æœŸå¾…æ„Ÿã‚’æ¼”å‡º
   - ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã§ãƒ¯ã‚¯ãƒ¯ã‚¯æ„Ÿ
   - ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ãã§æµå‹•æ€§ã‚’è¡¨ç¾

2. **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ„Ÿ**
   - æ¸©ã‹ã¿ã®ã‚ã‚‹è‰²æ¸©åº¦
   - æœ‰æ©Ÿçš„ãªå‹•ãï¼ˆSpring animationï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å¼•ãç«‹ã¦ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªæ çµ„ã¿

3. **æ„›ã®ã‚ã‚‹åˆ†é¡**
   - ã‚¿ã‚°ã¯è§’ä¸¸ã§æŸ”ã‚‰ã‹ã
   - é¸æŠæ™‚ã¯å„ªã—ããƒã‚¤ãƒ©ã‚¤ãƒˆ
   - ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã¯è¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ã

#### ã‚«ãƒ©ãƒ¼ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼
- **ãƒ—ãƒ©ã‚¤ãƒãƒª**: æ·¡ã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¢ç´¢ãƒ»ç™ºè¦‹ï¼‰
- **ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ**: é®®ã‚„ã‹ã ãŒå„ªã—ã„è‰²ï¼ˆæ¨ã—æ´»ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼‰
- **ãƒ™ãƒ¼ã‚¹**: è½ã¡ç€ã„ãŸèƒŒæ™¯ï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å¼•ãç«‹ã¦ã‚‹ï¼‰

### Visual Characteristics
1. **ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ & é€æ˜æ„Ÿ**
   - èƒŒæ™¯ï¼šè–„ã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆopacity 0.05-0.08ï¼‰ã§æ·±ã¿ã‚’æ¼”å‡º
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šã‚†ã£ãã‚Šå‹•ãã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - é‡è¦è¦ç´ ï¼šã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ©ãƒ¼ã‚’åŠ¹æœçš„ã«ä½¿ç”¨

2. **ã‚·ãƒ£ãƒ‰ã‚¦ & ãƒ‡ãƒ—ã‚¹**
   - ä¸»è¦è¦ç´ ï¼š`shadow(radius: 20, y: 10)` ã§æµ®éŠæ„Ÿ
   - ãƒœã‚¿ãƒ³ï¼šæœ‰åŠ¹æ™‚ã«ã‚ˆã‚Šå¼·ã„ã‚·ãƒ£ãƒ‰ã‚¦ã§å­˜åœ¨æ„Ÿå¼·èª¿
   - ã‚«ãƒ¼ãƒ‰ï¼šå¾®ç´°ãªã‚·ãƒ£ãƒ‰ã‚¦ã§éšå±¤ã‚’è¡¨ç¾

3. **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŸå‰‡**
   - Spring animationï¼š`spring(response: 0.8, dampingFraction: 0.6)`
   - æ®µéšçš„è¡¨ç¤ºï¼š0.3ç§’é–“éš”ã§ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãƒ‡ã‚£ã‚¹ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ãƒ¼
   - ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼šãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã‚„ã‚¿ãƒƒãƒ—æ™‚ã®å¾®ç´°ãªå‹•ã

4. **ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°**
   - ä¸»è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“ï¼š`unrelatedComponentDivider`
   - é–¢é€£è¦ç´ é–“ï¼š`relatedComponentDivider`
   - ã‚°ãƒ«ãƒ¼ãƒ—å†…ï¼š`componentGrouping`

5. **ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£**
   - ã‚¿ã‚¤ãƒˆãƒ«ï¼š`.largeTitle` or `.system(size: 36, weight: .bold, design: .rounded)`
   - èª¬æ˜æ–‡ï¼šé€æ˜åº¦ã§éšå±¤è¡¨ç¾ï¼ˆ0.85 â†’ 0.65ï¼‰
   - ãƒ•ã‚©ãƒ³ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ï¼š`.rounded` ã§è¦ªã—ã¿ã‚„ã™ã•

6. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**
   - é‡è¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼šè§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆUIImpactFeedbackGeneratorï¼‰
   - å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼šãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã«ã‚¹ã‚±ãƒ¼ãƒ«æ‹¡å¤§
   - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼šé¸æŠæ™‚ã«ãƒœãƒ¼ãƒ€ãƒ¼ãƒã‚¤ãƒ©ã‚¤ãƒˆ

### å®Ÿè£…æ™‚ã®æ³¨æ„
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªå…ˆ**ï¼šéå‰°ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯é¿ã‘ã‚‹
- **ä¸€è²«æ€§**ï¼šå…¨ç”»é¢ã§åŒã˜ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã‚’ä½¿ç”¨
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**ï¼šReduce Motionè¨­å®šã®è€ƒæ…®

## Feedback Reference
**IMPORTANT**: Always check `.claude/FEEDBACK_LOG.md` for specific feedback and corrections before implementing features.