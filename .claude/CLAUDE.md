# Claude Development Guidelines for IlluMefy-iOS

## Project Overview
IlluMefy is a food management iOS app built with SwiftUI and Clean Architecture.

## Architecture Rules
- Follow Clean Architecture pattern:
  - Presentation Layer: Views, ViewModels
  - Domain Layer: UseCases, Entities
  - Data Layer: Repositories, DataSources
- Use dependency injection via `DependencyContainer`

## Coding Standards

### Naming Conventions
- Use `IlluMefy` prefix for all custom components (not `Nimli`)
- ViewModels: `[Feature]ViewModel`
- UseCases: `[Action][Entity]UseCase`
- Repositories: `[Entity]Repository`

### UI Components
- **基本方針**: 共有UIコンポーネントを優先的に使用する
- Always use existing shared components:
  - `IlluMefyButton` - グラデーションボタン
  - `IlluMefyCardNormal` - カードコンテナ
  - `IlluMefyCheckbox` - チェックボックス  
  - `IlluMefyLoadingDialog` - ローディング表示
  - `IlluMefyPlainTextField` - 通常テキストフィールド
  - `IlluMefyConfidentialTextField` - セキュアテキストフィールド
- **新規コンポーネント作成時**:
  - 必ず`IlluMefy`プレフィックスを付ける
  - `/Utilities/Components/[ComponentType]/`に配置
- Define constants for hardcoded values
- Use color assets from `Asset.Color.*`

### Localization
- Add strings to `Resources/Localizable.strings`
- Follow naming pattern: `[screen].[component].[usage]`
- **必ずSwiftGenで生成したアクセッサを使用** (直接文字列リテラルは使用禁止)
  - 例: `L10n.login.button.submit` を使用 (❌ "Submit" を直接使用)
- Run swiftgen after adding strings:
  ```bash
  cd IlluMefy/IlluMefy && swiftgen run strings Resources/Localizable.strings -t structured-swift5 -o Generated/Strings.swift
  ```

### Git Workflow
- **Branch Strategy**: 各issueに対して1つのブランチのみを作成し、派生ブランチは作らない
  - Example: Issue #2 → `claude/issue-2-YYYYMMDD_HHMMSS` (1つのブランチで完結)
- Commit messages: Use conventional commits (feat:, fix:, refactor:)
- Don't include "Generated by Claude" or similar messages
- Always run lint/typecheck before committing

### Testing
- Check for build errors before pushing
- Test UI changes in SwiftUI Preview when possible

## Common Tasks

### Adding a new screen
1. Create View and ViewModel in `/Presentations/[Feature]/`
2. Create UseCase in `/UseCases/[Feature]/`
3. Create Repository in `/Data/Repositories/[Feature]/`
4. Add localization strings
5. Register dependencies in `DependencyContainer`

### Modifying existing components
1. Check all usages before making changes
2. Maintain backward compatibility
3. Update documentation if needed

## Important Notes
- Phone number fields should use `.keyboardType(.phonePad)`
- Always handle loading and error states
- Follow existing patterns in the codebase

## Feedback Reference
**IMPORTANT**: Always check `.claude/FEEDBACK_LOG.md` for specific feedback and corrections before implementing features.